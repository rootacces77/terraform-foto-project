<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gallery</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0; background:#0b1220; color:#e6edf3; }
    header { padding: 18px 16px; border-bottom: 1px solid #1e2a44; background:#111a2e; position: sticky; top: 0; z-index: 10; }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 16px; }
    .muted { color:#b6c2d0; }
    .grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 12px; }
    .card { background:#111a2e; border:1px solid #1e2a44; border-radius: 14px; overflow:hidden; }
    .card img { width:100%; height:240px; object-fit:cover; display:block; background:#0b1220; cursor: zoom-in; }
    .cap { padding: 10px 12px; font-size: 13px; display:flex; justify-content:space-between; gap:10px; align-items:center; }
    a { color:#8ab4ff; text-decoration:none; }
    .btn { padding: 8px 10px; border-radius: 10px; border:1px solid #1e2a44; background:#0f1730; color:#e6edf3; cursor:pointer; }
    .btn:disabled { opacity:.55; cursor:not-allowed; }
    .btn:hover { filter: brightness(1.08); }
    .toprow { display:flex; justify-content:space-between; gap:12px; align-items:center; flex-wrap:wrap; }

    /* Lightbox */
    .modal { position:fixed; inset:0; background: rgba(0,0,0,.78); display:none; align-items:center; justify-content:center; padding:18px; z-index: 999; }
    .modal.open { display:flex; }
    .modal-inner { width:min(1100px, 96vw); height:min(92vh, 900px); display:flex; flex-direction:column; gap:10px; }
    .modal-bar { display:flex; justify-content:space-between; align-items:center; gap:10px; }
    .modal-title { color:#b6c2d0; font-size: 13px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
    .modal-stage { flex:1; display:flex; align-items:center; justify-content:center; position:relative; }
    .modal-stage img { max-width: 96vw; max-height: 82vh; object-fit: contain; display:block; border-radius: 12px; cursor: zoom-out; }
    .navbtn {
      position:absolute; top:50%; transform: translateY(-50%);
      padding: 10px 12px; border-radius: 12px;
      border:1px solid rgba(255,255,255,.12); background: rgba(15,23,48,.55);
      color:#e6edf3; cursor:pointer; user-select:none;
    }
    .navbtn:hover { filter: brightness(1.12); }
    .navbtn.left { left: 8px; }
    .navbtn.right { right: 8px; }
    .hint { color:#b6c2d0; font-size:12px; }
  </style>
</head>

<body>
  <header>
    <div class="wrap toprow">
      <div><strong>Gallery</strong></div>
      <div id="status" class="muted">Loading…</div>
      <button id="dlFolder" class="btn" style="display:none">Download folder (ZIP)</button>
    </div>
    <div class="wrap hint" style="padding-top:0">
      Tip: click an image to open viewer • use ←/→ keys • swipe on mobile
    </div>
  </header>

  <main class="wrap">
    <div id="grid" class="grid"></div>
  </main>

  <!-- Lightbox -->
  <div id="modal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-inner">
      <div class="modal-bar">
        <div class="modal-title" id="modalTitle"></div>
        <div style="display:flex; gap:8px; align-items:center;">
          <a id="modalDownload" class="btn" href="#" download>Download</a>
          <button id="modalClose" class="btn">Close</button>
        </div>
      </div>
      <div class="modal-stage" id="modalStage">
        <button class="navbtn left" id="prevBtn" aria-label="Previous">←</button>
        <img id="modalImg" alt="preview" />
        <button class="navbtn right" id="nextBtn" aria-label="Next">→</button>
      </div>
    </div>
  </div>

  <!-- JSZip for “download folder” -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" integrity="sha512-r0z7Fh7C9oU2m+7r7G0o4X+zqK+W6q5tB2m0+uO3c7QG3gVwE7cQvTQp9v0nJx4wQ7gF0uJd9rYVZQ4a3VgJ1A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="/jszip.min.js"></script>
  <script src="/app.js"></script>
</body>
</html>
